var Todo=function(){"use strict";function e(e,t){e.appendChild(t)}function t(e,t,n){e.insertBefore(t,n)}function n(e){e.parentNode.removeChild(e)}function i(e){return document.createElement(e)}function r(e){return document.createTextNode(e)}function c(){return document.createComment("")}function l(e,t,n,i){e.addEventListener(t,n,i)}function o(e,t,n,i){e.removeEventListener(t,n,i)}function s(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function a(e,t){e.data=""+t}function d(){}function u(e){e()}function h(){return Object.create(null)}function m(e){e.forEach(u)}function $(e){return"function"==typeof e}function f(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let p=!1,g=[];const _=[],k=[],v={enabled:!1};function y(e){var t;g.push(e),p||(p=!0,t=N,Promise.resolve().then(()=>{p&&t()}))}function b(e){k.push(e)}function N(){const e=new Set;do{for(;g.length;)g.shift().$$update();for(;_.length;)_.pop()();for(;k.length;){const t=k.pop();e.has(t)||(t(),e.add(t))}}while(g.length);p=!1}let w;function F(e){w.$$onMount.push(e)}function x(e){w.$$afterRender.push(e)}class C{constructor(e,t,n,i){this.$$beforeRender=[],this.$$onMount=[],this.$$afterRender=[],this.$$onDestroy=[],this.$$bindings=h(),this.$$callbacks=h(),this.$$slotted=e.slots||{},w=this;const[r,c,l]=t(this,e=>{this.$$make_dirty(e),this.$$bindings[e]&&this.$$bindings[e](r()[e])});this.$$={get_state:r,inject_props:c,inject_refs:l,not_equal:i},this.$$refs={},this.$$dirty=null,this.$$bindingGroups=[],e.props&&this.$$.inject_props(e.props),m(this.$$beforeRender),this.$$fragment=n(this,this.$$.get_state()),e.target&&(v.enabled=!!e.intro,this.$$mount(e.target,e.anchor,e.hydrate),N(),v.enabled=!0)}$destroy(){this.$$destroy(!0),this.$$update=this.$$destroy=d}$on(e,t){const n=this.$$callbacks[e]||(this.$$callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){if(this.$$){const t=this.$$.get_state();this.$$.inject_props(e);for(const n in e)this.$$.not_equal(t[n],e[n])&&this.$$make_dirty(n)}}$$bind(e,t){this.$$bindings[e]=t,t(this.$$.get_state()[e])}$$destroy(e){this.$$&&(m(this.$$onDestroy),this.$$fragment.d(e),this.$$onDestroy=this.$$fragment=null,this.$$.get_state=(()=>({})))}$$make_dirty(e){this.$$dirty||(y(this),this.$$dirty={}),this.$$dirty[e]=!0}$$mount(e,t,n){var i;n?(this.$$fragment.l((i=e,Array.from(i.childNodes))),this.$$fragment.m(e,t)):(this.$$fragment.c(),this.$$fragment[this.$$fragment.i?"i":"m"](e,t)),this.$$.inject_refs(this.$$refs),b(()=>{const e=this.$$onMount.map(u).filter($);this.$$onDestroy?this.$$onDestroy.push(...e):m(e),this.$$onMount=[]}),this.$$afterRender.forEach(b)}$$update(){m(this.$$beforeRender),this.$$fragment.p(this.$$dirty,this.$$.get_state()),this.$$.inject_refs(this.$$refs),this.$$dirty=null,this.$$afterRender.forEach(b)}}function R(e,t,n){const i=Object.create(e);return i.item=t[n],i.each_value=t,i.index=n,i}function A(c,d){for(var u,h,m,$,f,p,g,_,k,v,y,b,N,w,F,x,C,A,j,E,S,O,T,q,L,I,J,B,G,H,K,P,W=d.numActive(),z=1===d.numActive()?"item":"items",Q=d.items,U=[],V=0;V<Q.length;V+=1)U[V]=D(c,R(d,Q,V));var X=d.numCompleted()&&M(c,d);return{c(){u=i("section"),h=i("input"),$=r("\n\t\t"),(f=i("label")).textContent="Mark all as complete",p=r("\n\n\t\t"),g=i("ul");for(var e=0;e<U.length;e+=1)U[e].c();_=r("\n\n\t\t"),k=i("footer"),v=i("span"),y=i("strong"),b=r(W),N=r(" "),w=r(z),F=r(" left"),x=r("\n\n\t\t\t"),C=i("ul"),A=i("li"),j=i("a"),E=r("All"),O=r("\n\t\t\t\t"),T=i("li"),q=i("a"),L=r("Active"),J=r("\n\t\t\t\t"),B=i("li"),G=i("a"),H=r("Completed"),P=r("\n\n\t\t\t"),X&&X.c(),l(h,"change",d.change_handler),h.id="toggle-all",h.className="toggle-all",s(h,"type","checkbox"),h.checked=m=d.numCompleted()===d.items.length,f.htmlFor="toggle-all",g.className="todo-list",v.className="todo-count",l(j,"click",d.click_handler_1),j.className=S="all"===d.currentFilter?"selected":"",j.href="/",l(q,"click",d.click_handler_2),q.className=I="active"===d.currentFilter?"selected":"",q.href="/active",l(G,"click",d.click_handler_3),G.className=K="completed"===d.currentFilter?"selected":"",G.href="/completed",C.className="filters",k.className="footer",u.className="main"},m(n,i){t(n,u,i),e(u,h),e(u,$),e(u,f),e(u,p),e(u,g);for(var r=0;r<U.length;r+=1)U[r].m(g,null);e(u,_),e(u,k),e(k,v),e(v,y),e(y,b),e(v,N),e(v,w),e(v,F),e(k,x),e(k,C),e(C,A),e(A,j),e(j,E),e(C,O),e(C,T),e(T,q),e(q,L),e(C,J),e(C,B),e(B,G),e(G,H),e(k,P),X&&X.m(k,null)},p(e,t){if(m!==(m=t.numCompleted()===t.items.length)&&(h.checked=m),e.filter||e.items||e.currentFilter||e.editing){Q=t.items;for(var n=0;n<Q.length;n+=1){const i=R(t,Q,n);U[n]?U[n].p(e,i):(U[n]=D(c,i),U[n].c(),U[n].m(g,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=Q.length}W!==(W=t.numActive())&&a(b,W),z!==(z=1===t.numActive()?"item":"items")&&a(w,z),e.currentFilter&&S!==(S="all"===t.currentFilter?"selected":"")&&(j.className=S),e.currentFilter&&I!==(I="active"===t.currentFilter?"selected":"")&&(q.className=I),e.currentFilter&&K!==(K="completed"===t.currentFilter?"selected":"")&&(G.className=K),t.numCompleted()?X||((X=M(c,t)).c(),X.m(k,null)):X&&(X.d(1),X=null)},d(e){e&&n(u),o(h,"change",d.change_handler),function(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(U,e),o(j,"click",d.click_handler_1),o(q,"click",d.click_handler_2),o(G,"click",d.click_handler_3),X&&X.d()}}}function j(c,d){var u,h,m,$,f,p,g,_,k,v,y=d.item.description;function b(){d.input_change_handler.call(this,d)}function N(){return d.dblclick_handler(d)}function w(){return d.click_handler(d)}var F=d.editing===d.index&&E(c,d);return{c(){u=i("li"),h=i("div"),m=i("input"),$=r("\n\t\t\t\t\t\t\t"),f=i("label"),p=r(y),g=r("\n\t\t\t\t\t\t\t"),_=i("button"),k=r("\n\n\t\t\t\t\t\t"),F&&F.c(),l(m,"change",b),m.className="toggle",s(m,"type","checkbox"),l(f,"dblclick",N),l(_,"click",w),_.className="destroy",h.className="view",u.className=v=(d.item.completed?"completed":"")+" "+(d.editing===d.index?"editing":"")},m(n,i){t(n,u,i),e(u,h),e(h,m),m.checked=d.item.completed,e(h,$),e(h,f),e(f,p),e(h,g),e(h,_),e(u,k),F&&F.m(u,null)},p(e,t){d=t,e.items&&(m.checked=d.item.completed),e.items&&y!==(y=d.item.description)&&a(p,y),d.editing===d.index?F?F.p(e,d):((F=E(c,d)).c(),F.m(u,null)):F&&(F.d(1),F=null),(e.items||e.editing)&&v!==(v=(d.item.completed?"completed":"")+" "+(d.editing===d.index?"editing":""))&&(u.className=v)},d(e){e&&n(u),o(m,"change",b),o(f,"dblclick",N),o(_,"click",w),F&&F.d()}}}function E(e,r){var c,s;return{c(){l(c=i("input"),"keydown",r.keydown_handler_1),l(c,"blur",r.blur_handler),c.value=s=r.item.description,c.id="edit",c.className="edit",c.autofocus=!0},m(e,n){t(e,c,n),c.focus()},p(e,t){e.items&&s!==(s=t.item.description)&&(c.value=s)},d(e){e&&n(c),o(c,"keydown",r.keydown_handler_1),o(c,"blur",r.blur_handler)}}}function D(e,i){var r,l=i.filter(i.item,i.currentFilter)&&j(e,i);return{c(){l&&l.c(),r=c()},m(e,n){l&&l.m(e,n),t(e,r,n)},p(t,n){n.filter(n.item,n.currentFilter)?l?l.p(t,n):((l=j(e,n)).c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&n(r)}}}function M(e,r){var c;return{c(){(c=i("button")).textContent="Clear completed",l(c,"click",r.click_handler_4),c.className="clear-completed"},m(e,n){t(e,c,n)},d(e){e&&n(c),o(c,"click",r.click_handler_4)}}}function S(s,a){var d,h,m,$,f,p,g,_=a.items.length>0&&A(s,a);return{c(){d=i("header"),(h=i("h1")).textContent="todos",m=r("\n\t"),$=i("input"),f=r("\n\n"),_&&_.c(),p=c(),l($,"keydown",a.keydown_handler),$.className="new-todo",$.placeholder="What needs to be done?",$.autofocus=!0,d.className="header"},m(n,i){t(n,d,i),e(d,h),e(d,m),e(d,$),s.$$refs.todoRef=$,t(n,f,i),_&&_.m(n,i),t(n,p,i),g=!0,$.focus()},p(e,t){t.items.length>0?_?_.p(e,t):((_=A(s,t)).c(),_.m(p.parentNode,p)):_&&(_.d(1),_=null)},i(e,t){g||this.m(e,t)},o:u,d(e){e&&n(d),o($,"keydown",a.keydown_handler),s.$$refs.todoRef===$&&(s.$$refs.todoRef=null,s.$$.inject_refs(s.$$refs)),e&&n(f),_&&_.d(e),e&&n(p)}}}function O(e,t){let n,i,r=[],c="all";try{r=JSON.parse(localStorage.getItem("todos-svelte"))||[],t("items")}catch(e){r=[],t("items")}F(()=>{const e=()=>{c="all",t("currentFilter"),"#/active"===window.location.hash?(c="active",t("currentFilter")):"#/completed"===window.location.hash&&(c="completed",t("currentFilter"))};window.addEventListener("hashchange",e),e()}),x(()=>{try{localStorage.setItem("todos-svelte",JSON.stringify(r))}catch(e){}});const l=e=>e.blur(),o=()=>{const e=n=null;return t("editing"),e},s=()=>{const e=r=r.filter(e=>!e.completed);return t("items"),e},a=e=>{const i=n=e;return t("editing"),i},u=e=>{r=[...r,{description:e,completed:!1}],t("items"),i.value="",t("todoRef")},h=e=>{const n=r=r.splice(e,1);return t("items"),n},m=e=>{const i=r=r.map((t,i)=>i===n?{...t,description:e}:t);return t("items"),i},$=e=>{const n=r=r.map(t=>({...t,completed:e}));return t("items"),n},f=(e,t)=>{"Enter"===t&&(l(e),o()),"Escape"===t&&o()},p=(e,t)=>{e.preventDefault(),window.location.hash=t};return[()=>({items:r,currentFilter:c,editing:n,todoRef:i,numActive:()=>r.filter(e=>!e.completed).length,numCompleted:()=>r.filter(e=>e.completed).length,filter:(e,t)=>"all"===t||("completed"===t?e.completed:"active"===t?!e.completed:void 0),blurNode:l,cancel:o,clearCompleted:s,edit:a,newTodo:u,remove:h,submit:m,toggleAll:$,handleKeycode:f,updateHash:p,onMount:F,afterRender:x,keydown_handler:function({key:e}){return"Enter"===e?u(this.value):null},change_handler:function(){return $(this.checked)},dblclick_handler:function({index:e}){return a(e)},click_handler:function({index:e}){return h(e)},keydown_handler_1:function({key:e}){return f(this,e)},blur_handler:function(e){return m(this.value)},click_handler_1:function(e){return p(e,"#/")},click_handler_2:function(e){return p(e,"#/active")},click_handler_3:function(e){return p(e,"#/completed")},click_handler_4:function(){return s()},input_change_handler:function({item:e,each_value:n,index:i}){n[i].completed=this.checked,t("items")}}),d,e=>{i=e.todoRef}]}return new class extends C{constructor(e){super(e,O,S,f)}}({target:document.querySelector(".todoapp"),name:"Todo"})}();
//# sourceMappingURL=bundle.js.map
